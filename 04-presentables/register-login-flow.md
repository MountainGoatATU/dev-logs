#draft #presentable
## 1. **/auth/register** 
### 1. **Request**
- ALL user details are sent from the **client**
```json
{
  "auth_salt": "cmFuZG9tc2FsdGJ5dGVz",
  "auth_verifier": "aGFzaGVkcGFzc3dvcmRieXRlcw==",
  "email": "user@example.com",
  "vault": {
    "auth_tag": "YXV0aHRhZwYXV0aHRhZw==",
    "encrypted_blob": "ZW5jcnlwdGVkZGF0YQ==",
    "nonce": "cmFuZG9tbm9uY2U=",
    "vault_salt": "cmFuZG9tc2FsdA=="
  }
}
```
### 2. **Response**
- **User ID** is generated by the server
- **Server** NEVER returns **auth verifier**
```json
{
  "_id": "af7d341e-85be-4e54-a8c6-e5fd685c4742",
  "email": "user@example.com",
  "auth_salt": "cmFuZG9tc2FsdGJ5dGVz",
  "mfa_enabled": false,
  "mfa_secret": null,
  "vault": {
    "vault_salt": "cmFuZG9tc2FsdA==",
    "encrypted_blob": "ZW5jcnlwdGVkZGF0YQ==",
    "nonce": "cmFuZG9tbm9uY2U=",
    "auth_tag": "YXV0aHRhZwYXV0aHRhZw=="
  }
}
```
## 2. **/auth/init**
### 1. **Request**
- **Client** sends **email** for the **server** to use to look up the **user**
```json
{
  "email": "user@example.com"
}
```
### 2. **Response**
- **Server** returns **auth salt** for **client** to use to create **auth verifier**
```json
{
  "user_id": "af7d341e-85be-4e54-a8c6-e5fd685c4742",
  "auth_salt": "cmFuZG9tc2FsdGJ5dGVz",
  "vault": {
    "vault_salt": "cmFuZG9tc2FsdA==",
    "encrypted_blob": "ZW5jcnlwdGVkZGF0YQ==",
    "nonce": "cmFuZG9tbm9uY2U=",
    "auth_tag": "YXV0aHRhZwYXV0aHRhZw=="
  },
  "mfa_enabled": false
}
```
## 3. **/auth/verify**
### 1. **Request**
- **Auth verifier** created by **client** with **auth salt** + **master password**
```json
{
  "user_id": "af7d341e-85be-4e54-a8c6-e5fd685c4742",
  "auth_verifier": "aGFzaGVkcGFzc3dvcmRieXRlcw=="
}
```
### 2. **Response**
- If **auth verifier** from **client** matches the one on the **database**, **server** returns **access token**
```json
{
  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZjdkMzQxZS04NWJlLTRlNTQtYThjNi1lNWZkNjg1YzQ3NDIiLCJpc3MiOiJHb2F0VmF1bHRTZXJ2ZXIiLCJleHAiOjE3NjM1NzE2NzksImlhdCI6MTc2MzU2ODA3OX0.L1tjbF4DyeAKMcmOEX45U0uqIaCX6L8Ku7gdrEQmZlY",
  "token_type": "bearer"
}
```